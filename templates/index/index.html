{% extends 'base.html' %}
{% block title %}主页{% endblock %}
{% block content %}
<div class="main-content">
    {% if message %}
    <div class="alert alert-warning">{{ message }}</div>
    {% endif %}
    <section class="section">
        <div class="row">
            <div class="col-lg-7 col-md-12 col-12 col-sm-12">
                <div class="card">
                    <div class="card-header">
                        <div class="float-right">
                            <a href="/index/problem_solve/" class="btn btn-primary">View All</a>
                        </div>
                        <h4>待处理问题</h4>
                    </div>
                    <div class="card-body">
                        <div class="table-responsive">
                            <table class="table table-striped">
                                <thead>
                                <tr>
                                    <th>问题</th>
                                    <th>创建人</th>
                                    <th>操作</th>
                                </tr>
                                </thead>
                                <tbody>
                                <!-- 样例 -->
                                {% for problem in to_my_problem%}
                                <tr>
                                    <td>
                                        {{problem.pp_title}}
                                        <div class="table-links">
                                            状态
                                            <div class="bullet"></div>
                                            {{problem.pp_state}}
                                        </div>
                                    </td>
                                    {% for author in author_information %}
                                    {% if problem.pp_author == author.user_id %}
                                    <td>{{author.user_name}}</td>
                                    {% endif %}
                                    {% endfor %}
                                    <td>
                                        <a class="btn btn-primary btn-action mr-1" data-toggle="tooltip"
                                           title="Edit"><i class="ion ion-edit"></i></a>
                                    </td>
                                </tr>
                                {% endfor %}
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-lg-5 col-md-12 col-12 col-sm-12">
                <div class="card">
                    <div class="card-header">
                        <div class="float-right">
                            <a href="/index/my_problem/" class="btn btn-primary">View All</a>
                        </div>
                        <div class="float-right">
                            <a href="/index/problem_proposed/" class="btn btn-primary">add</a>
                        </div>
                        <h4>我的问题</h4>
                    </div>
                    <div class="card-body">
                        <div class="table-responsive">
                            <table class="table table-striped">
                                <thead>
                                <tr>
                                    <th>问题</th>
                                    <th>操作</th>
                                </tr>
                                </thead>
                                <tbody>
                                {% for problem in my_problem %}
                                <tr>
                                    <td>
                                        {{problem.pp_title}}
                                        <div class="table-links">
                                            状态
                                            <div class="bullet"></div>
                                            {{problem.pp_state}}
                                        </div>
                                    </td>
                                    <td>
                                        <a class="btn btn-primary btn-action mr-1" data-toggle="tooltip"
                                           title="Edit"><i
                                                class="ion ion-edit"></i></a>
                                        <a class="btn btn-danger btn-action" data-toggle="tooltip"
                                           title="Delete"><i
                                                class="ion ion-trash-b"></i></a>
                                    </td>
                                </tr>
                                {% endfor %}
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-lg-12 col-md-12 col-12 col-sm-12">
                <div class="card">
                    <div class="card-header">
                        <div class="float-right">
                            <a href="#" class="btn btn-primary">View All</a>
                        </div>
                        <h4>所有记录</h4>
                    </div>
                    <div class="card-body">
                        <div class="table-responsive">
                            <table class="table table-striped">
                                <thead>
                                <tr>
                                    <th>标题</th>
                                    <th>作者</th>
                                    <th>指派给</th>
                                    <th>操作</th>
                                </tr>
                                </thead>
                                <tbody>
                                {% for problem in all_problem %}
                                <tr>
                                    <td>
                                        {{problem.pp_title}}
                                        <div class="table-links">
                                            状态
                                            <div class="bullet"></div>
                                            {{problem.pp_state}}
                                        </div>
                                    </td>
                                    {% for author in author_information %}
                                    {% if problem.pp_author == author.user_id %}
                                    <td>{{author.user_name}}</td>
                                    {% endif %}
                                    {% if problem.pp_to_user == author.user_id %}
                                    <td>{{author.user_name}}</td>
                                    {% endif %}
                                    {% endfor %}
                                    <td>
                                        <a class="btn btn-primary btn-action mr-1" data-toggle="tooltip"
                                           title="Edit"><i
                                                class="ion ion-edit"></i></a>
                                        <a class="btn btn-danger btn-action" data-toggle="tooltip"
                                           title="Delete"><i
                                                class="ion ion-trash-b"></i></a>
                                    </td>
                                </tr>
                                {% endfor %}
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
</div>


{% endblock %}